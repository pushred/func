<p class={`swatch ${style.className}`} style={getTextColor(style.props[0].value)}>
  {style.selector}
</p>

<style>
  .swatch {
    border-radius: 0.25em;
    padding: 0.5em;
  }
</style>

<script>
  import chroma from 'chroma-js';

  function getTextColor(backgroundColor) {
    let whiteContrast = 0;
    let blackContrast = 0;

    try {
      whiteContrast = chroma.contrast('white', backgroundColor);
      blackContrast = chroma.contrast('black', backgroundColor);
    } catch (err) {
      console.error(err);
    }

    let textColor = whiteContrast > blackContrast
      ? 'white'
      : 'black';

    return `color: ${textColor}`;
  }

  export default {
    helpers: {
      getTextColor,
    },
  }
</script>
